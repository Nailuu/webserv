apt-get update
apt-get upgrade
su -
apt-get install sudo -y
usermod -aG sudo root
sudo reboot
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install software-properties-common
sudo apt-get install default-jre
sudo apt-get install default-jdk
sudo apt-get -y install nano

  - Install SFTP Access :

sudo apt update
sudo apt upgrade -y
sudo apt install -y openssh-server
sudo systemctl start sshd
sudo systemctl status sshd
sudo mkdir /srv/sftp
sudo groupadd sftpusers
sudo useradd -G sftpusers -d / -s /sbin/nologin USERNAME
sudo passwd USERNAME
sudo nano /etc/ssh/sshd_config
	---> la ligne "PasswordAuthentication yes" ne doit PAS être commentée ;
	---> Ajouter à la fin :

--------------------------------------------

Match Group sftpusers  
    X11Forwarding no  
    AllowTcpForwarding no  
    ChrootDirectory /srv/sftp
    ForceCommand internal-sftp

--------------------------------------------

sudo systemctl restart sshd
sudo systemctl status sshd

sftp USERNAME@IP
---> voir si ça marche ! pour quitter : quit

--> Si rien n'est disponible depuis le SFTP : sudo chown USERNAME:sftpusers /
--> Donner l'accès au root : sudo chmod -R 777 /root/

sudo apt install screen

openvpn : https://www.youtube.com/watch?v=aWRbs07z9Po

Installation d'un Site WEB:

https://support.ni-host.com/faq/vps/debian10-lamp

 - installation d'apache2 :

apt-get update && apt-get upgrade -y
apt-get install apache2 apache2-doc

 - installation de php puis vérification :

apt-get install php-common libapache2-mod-php php-cli
cd /var/www/html
nano phpinfo.php
écrire : <?php phpinfo() ?>
puis aller sur l'adresse : site/phpinfo.php
si tout se passe bien une page php info est disponible à cette adresse
--> ne pas oublier de supprimer ce fichier : rm /var/www/html/phpinfo.php

 - installation de Mysql :

tout d'abord, get le nom du package : apt-cache search mysql-server
apt-get install mysql-server php-mysql
mysql_secure_installation

Change the root password? [Y/n] => n
Remove anonymous users? [Y/n] => y
Disallow root login remotely? [Y/n] => y
Remove test database and access to it? [Y/n] => y
Reload privilege tables now? [Y/n] => y

Accéder à la base de données : 

mysql -u root -p
(définir un mdp)

Puis créer l'utilisateur :

MariaDB [(none)]> CREATE USER 'my_user'@'localhost' IDENTIFIED BY 'my_password';
MariaDB [(none)]> GRANT ALL PRIVILEGES ON * . * TO 'my_user'@'localhost';
MariaDB [(none)]> FLUSH PRIVILEGES;

MariaDB [(none)]> exit

  - Installation de PHP My Admin :

apt-get install phpmyadmin
(puis choisir Apache2 et dire NO pour l'option de BDD)

nano /etc/apache2/apache2.conf
(et rajouter à la fin : Include /etc/phpmyadmin/apache.conf)
--> echo "Include /etc/phpmyadmin/apache.conf" >> /etc/apache2/apache2.conf

service apache2 restart

PhpmyAdmin est disponible à : IP/phpmyadmin

  - Changer l'adresse : 

nano /etc/phpmyadmin/apache.conf -> Changer dans la ligne Alias
systemctl restart apache2

  - Installation d'un certificiat SSL :

https://digitalboxweb.wordpress.com/2020/04/04/vps-securiser-son-site-avec-un-certificat-ssl/ (site assez complet)

Premièrement, si le paquet python-cerbot-apache n'est pas trouvable, le télécharger avec : 

sudo apt install -y certbot python3-certbot-apache

De plus, attention, car le fichier options-ssl-apache.conf peut être absent, test avec sudo apachectl configtest
Il suffit alors de le télécharger :
https://github.com/nneonneo/letsencrypt/blob/master/letsencrypt-apache/letsencrypt_apache/options-ssl-apache.conf
Et bien sûr de le mettre au bon endroit...

Pour l'erreur "within VirtualHost", modifier le fichier en mettant la ligne concernée en dehors des lignes VirtualHost.
Penser à bien fermer la première balise également ! (non fermée à l'origine)

Il faut également penser à renouveller le certificat (voir tuto WEB)